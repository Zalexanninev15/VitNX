\doxysection{Vit\+NX\+\_\+\+Dock\+Group.\+cs}
\label{a00191_source}\index{E:/Github/VitNX/VitNX/UI/BasedOnDarkUI/Docking/VitNX\_DockGroup.cs@{E:/Github/VitNX/VitNX/UI/BasedOnDarkUI/Docking/VitNX\_DockGroup.cs}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{keyword}{using} System;}
\DoxyCodeLine{00002 \textcolor{keyword}{using} System.Collections.Generic;}
\DoxyCodeLine{00003 \textcolor{keyword}{using} System.ComponentModel;}
\DoxyCodeLine{00004 \textcolor{keyword}{using} System.Drawing;}
\DoxyCodeLine{00005 \textcolor{keyword}{using} System.Linq;}
\DoxyCodeLine{00006 \textcolor{keyword}{using} System.Windows.Forms;}
\DoxyCodeLine{00007 \textcolor{keyword}{using} VitNX.UI.BasedOnDarkUI.Config;}
\DoxyCodeLine{00008 }
\DoxyCodeLine{00009 \textcolor{keyword}{namespace }VitNX.UI.BasedOnDarkUI.Docking}
\DoxyCodeLine{00010 \{}
\DoxyCodeLine{00011     [ToolboxItem(\textcolor{keyword}{false})]}
\DoxyCodeLine{00012     \textcolor{keyword}{public} \textcolor{keyword}{class }VitNX\_DockGroup : Panel}
\DoxyCodeLine{00013     \{}
\DoxyCodeLine{00014 \textcolor{preprocessor}{        \#region Field Region}}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00016         \textcolor{keyword}{private} List<VitNX\_DockContent> \_contents = \textcolor{keyword}{new} List<VitNX\_DockContent>();}
\DoxyCodeLine{00017 }
\DoxyCodeLine{00018         \textcolor{keyword}{private} Dictionary<VitNX\_DockContent, VitNX\_DockTab> \_tabs = \textcolor{keyword}{new} Dictionary<VitNX\_DockContent, VitNX\_DockTab>();}
\DoxyCodeLine{00019 }
\DoxyCodeLine{00020         \textcolor{keyword}{private} VitNX\_DockTabArea \_tabArea;}
\DoxyCodeLine{00021 }
\DoxyCodeLine{00022         \textcolor{keyword}{private} VitNX\_DockTab \_dragTab = \textcolor{keyword}{null};}
\DoxyCodeLine{00023 }
\DoxyCodeLine{00024 \textcolor{preprocessor}{        \#endregion Field Region}}
\DoxyCodeLine{00025 }
\DoxyCodeLine{00026 \textcolor{preprocessor}{        \#region Property Region}}
\DoxyCodeLine{00027 }
\DoxyCodeLine{00028         \textcolor{keyword}{public} VitNX\_DockPanel DockPanel \{ \textcolor{keyword}{get}; \textcolor{keyword}{private} \textcolor{keyword}{set}; \}}
\DoxyCodeLine{00029 }
\DoxyCodeLine{00030         \textcolor{keyword}{public} VitNX\_DockRegion DockRegion \{ \textcolor{keyword}{get}; \textcolor{keyword}{private} \textcolor{keyword}{set}; \}}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032         \textcolor{keyword}{public} VitNX\_DockArea DockArea \{ \textcolor{keyword}{get}; \textcolor{keyword}{private} \textcolor{keyword}{set}; \}}
\DoxyCodeLine{00033 }
\DoxyCodeLine{00034         \textcolor{keyword}{public} VitNX\_DockContent VisibleContent \{ \textcolor{keyword}{get}; \textcolor{keyword}{private} \textcolor{keyword}{set}; \}}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036         \textcolor{keyword}{public} \textcolor{keywordtype}{int} Order \{ \textcolor{keyword}{get}; \textcolor{keyword}{set}; \}}
\DoxyCodeLine{00037 }
\DoxyCodeLine{00038         \textcolor{keyword}{public} \textcolor{keywordtype}{int} ContentCount}
\DoxyCodeLine{00039         \{ \textcolor{keyword}{get} \{ \textcolor{keywordflow}{return} \_contents.Count; \} \}}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041 \textcolor{preprocessor}{        \#endregion Property Region}}
\DoxyCodeLine{00042 }
\DoxyCodeLine{00043 \textcolor{preprocessor}{        \#region Constructor Region}}
\DoxyCodeLine{00044 }
\DoxyCodeLine{00045         \textcolor{keyword}{public} VitNX\_DockGroup(VitNX\_DockPanel dockPanel, VitNX\_DockRegion dockRegion, \textcolor{keywordtype}{int} order)}
\DoxyCodeLine{00046         \{}
\DoxyCodeLine{00047             SetStyle(ControlStyles.OptimizedDoubleBuffer |}
\DoxyCodeLine{00048                      ControlStyles.ResizeRedraw |}
\DoxyCodeLine{00049                      ControlStyles.UserPaint, \textcolor{keyword}{true});}
\DoxyCodeLine{00050 }
\DoxyCodeLine{00051             DockPanel = dockPanel;}
\DoxyCodeLine{00052             DockRegion = dockRegion;}
\DoxyCodeLine{00053             DockArea = dockRegion.DockArea;}
\DoxyCodeLine{00054 }
\DoxyCodeLine{00055             Order = order;}
\DoxyCodeLine{00056 }
\DoxyCodeLine{00057             \_tabArea = \textcolor{keyword}{new} VitNX\_DockTabArea(DockArea);}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00059             DockPanel.ActiveContentChanged += DockPanel\_ActiveContentChanged;}
\DoxyCodeLine{00060         \}}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00062 \textcolor{preprocessor}{        \#endregion Constructor Region}}
\DoxyCodeLine{00063 }
\DoxyCodeLine{00064 \textcolor{preprocessor}{        \#region Method Region}}
\DoxyCodeLine{00065 }
\DoxyCodeLine{00066         \textcolor{keyword}{public} \textcolor{keywordtype}{void} AddContent(VitNX\_DockContent dockContent)}
\DoxyCodeLine{00067         \{}
\DoxyCodeLine{00068             dockContent.DockGroup = \textcolor{keyword}{this};}
\DoxyCodeLine{00069             dockContent.Dock = DockStyle.Fill;}
\DoxyCodeLine{00070 }
\DoxyCodeLine{00071             dockContent.Order = 0;}
\DoxyCodeLine{00072 }
\DoxyCodeLine{00073             \textcolor{keywordflow}{if} (\_contents.Count > 0)}
\DoxyCodeLine{00074             \{}
\DoxyCodeLine{00075                 var order = -\/1;}
\DoxyCodeLine{00076                 \textcolor{keywordflow}{foreach} (var otherContent \textcolor{keywordflow}{in} \_contents)}
\DoxyCodeLine{00077                 \{}
\DoxyCodeLine{00078                     \textcolor{keywordflow}{if} (otherContent.Order >= order)}
\DoxyCodeLine{00079                         order = otherContent.Order + 1;}
\DoxyCodeLine{00080                 \}}
\DoxyCodeLine{00081 }
\DoxyCodeLine{00082                 dockContent.Order = order;}
\DoxyCodeLine{00083             \}}
\DoxyCodeLine{00084 }
\DoxyCodeLine{00085             \_contents.Add(dockContent);}
\DoxyCodeLine{00086             Controls.Add(dockContent);}
\DoxyCodeLine{00087 }
\DoxyCodeLine{00088             dockContent.DockTextChanged += DockContent\_DockTextChanged;}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090             \_tabs.Add(dockContent, \textcolor{keyword}{new} VitNX\_DockTab(dockContent));}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092             \textcolor{keywordflow}{if} (VisibleContent == \textcolor{keyword}{null})}
\DoxyCodeLine{00093             \{}
\DoxyCodeLine{00094                 dockContent.Visible = \textcolor{keyword}{true};}
\DoxyCodeLine{00095                 VisibleContent = dockContent;}
\DoxyCodeLine{00096             \}}
\DoxyCodeLine{00097             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00098             \{}
\DoxyCodeLine{00099                 dockContent.Visible = \textcolor{keyword}{false};}
\DoxyCodeLine{00100             \}}
\DoxyCodeLine{00101 }
\DoxyCodeLine{00102             var menuItem = \textcolor{keyword}{new} ToolStripMenuItem(dockContent.DockText);}
\DoxyCodeLine{00103             menuItem.Tag = dockContent;}
\DoxyCodeLine{00104             menuItem.Click += TabMenuItem\_Select;}
\DoxyCodeLine{00105             menuItem.Image = dockContent.Icon;}
\DoxyCodeLine{00106             \_tabArea.AddMenuItem(menuItem);}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00108             UpdateTabArea();}
\DoxyCodeLine{00109         \}}
\DoxyCodeLine{00110 }
\DoxyCodeLine{00111         \textcolor{keyword}{public} \textcolor{keywordtype}{void} RemoveContent(VitNX\_DockContent dockContent)}
\DoxyCodeLine{00112         \{}
\DoxyCodeLine{00113             dockContent.DockGroup = \textcolor{keyword}{null};}
\DoxyCodeLine{00114 }
\DoxyCodeLine{00115             var order = dockContent.Order;}
\DoxyCodeLine{00116 }
\DoxyCodeLine{00117             \_contents.Remove(dockContent);}
\DoxyCodeLine{00118             Controls.Remove(dockContent);}
\DoxyCodeLine{00119 }
\DoxyCodeLine{00120             \textcolor{keywordflow}{foreach} (var otherContent \textcolor{keywordflow}{in} \_contents)}
\DoxyCodeLine{00121             \{}
\DoxyCodeLine{00122                 \textcolor{keywordflow}{if} (otherContent.Order > order)}
\DoxyCodeLine{00123                     otherContent.Order-\/-\/;}
\DoxyCodeLine{00124             \}}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126             dockContent.DockTextChanged -\/= DockContent\_DockTextChanged;}
\DoxyCodeLine{00127 }
\DoxyCodeLine{00128             \textcolor{keywordflow}{if} (\_tabs.ContainsKey(dockContent))}
\DoxyCodeLine{00129                 \_tabs.Remove(dockContent);}
\DoxyCodeLine{00130 }
\DoxyCodeLine{00131             \textcolor{keywordflow}{if} (VisibleContent == dockContent)}
\DoxyCodeLine{00132             \{}
\DoxyCodeLine{00133                 VisibleContent = \textcolor{keyword}{null};}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135                 \textcolor{keywordflow}{if} (\_contents.Count > 0)}
\DoxyCodeLine{00136                 \{}
\DoxyCodeLine{00137                     var newContent = \_contents[0];}
\DoxyCodeLine{00138                     newContent.Visible = \textcolor{keyword}{true};}
\DoxyCodeLine{00139                     VisibleContent = newContent;}
\DoxyCodeLine{00140                 \}}
\DoxyCodeLine{00141             \}}
\DoxyCodeLine{00142 }
\DoxyCodeLine{00143             var menuItem = \_tabArea.GetMenuItem(dockContent);}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00145             menuItem.Click -\/= TabMenuItem\_Select;}
\DoxyCodeLine{00146             \_tabArea.RemoveMenuItem(menuItem);}
\DoxyCodeLine{00147 }
\DoxyCodeLine{00148             UpdateTabArea();}
\DoxyCodeLine{00149         \}}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151         \textcolor{keyword}{public} List<VitNX\_DockContent> GetContents()}
\DoxyCodeLine{00152         \{}
\DoxyCodeLine{00153             \textcolor{keywordflow}{return} \_contents.OrderBy(c => c.Order).ToList();}
\DoxyCodeLine{00154         \}}
\DoxyCodeLine{00155 }
\DoxyCodeLine{00156         \textcolor{keyword}{private} \textcolor{keywordtype}{void} UpdateTabArea()}
\DoxyCodeLine{00157         \{}
\DoxyCodeLine{00158             \textcolor{keywordflow}{if} (DockArea == VitNX\_DockArea.Document)}
\DoxyCodeLine{00159                 \_tabArea.Visible = (\_contents.Count > 0);}
\DoxyCodeLine{00160             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00161                 \_tabArea.Visible = (\_contents.Count > 1);}
\DoxyCodeLine{00162 }
\DoxyCodeLine{00163             var size = 0;}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165             \textcolor{keywordflow}{switch} (DockArea)}
\DoxyCodeLine{00166             \{}
\DoxyCodeLine{00167                 \textcolor{keywordflow}{case} VitNX\_DockArea.Document:}
\DoxyCodeLine{00168                     size = \_tabArea.Visible ? Constsants.DocumentTabAreaSize : 0;}
\DoxyCodeLine{00169                     Padding = \textcolor{keyword}{new} Padding(0, size, 0, 0);}
\DoxyCodeLine{00170                     \_tabArea.ClientRectangle = \textcolor{keyword}{new} Rectangle(Padding.Left, 0, ClientRectangle.Width -\/ Padding.Horizontal, size);}
\DoxyCodeLine{00171                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00172 }
\DoxyCodeLine{00173                 \textcolor{keywordflow}{case} VitNX\_DockArea.Left:}
\DoxyCodeLine{00174                 \textcolor{keywordflow}{case} VitNX\_DockArea.Right:}
\DoxyCodeLine{00175                     size = \_tabArea.Visible ? Constsants.ToolWindowTabAreaSize : 0;}
\DoxyCodeLine{00176                     Padding = \textcolor{keyword}{new} Padding(0, 0, 0, size);}
\DoxyCodeLine{00177                     \_tabArea.ClientRectangle = \textcolor{keyword}{new} Rectangle(Padding.Left, ClientRectangle.Bottom -\/ size, ClientRectangle.Width -\/ Padding.Horizontal, size);}
\DoxyCodeLine{00178                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00179 }
\DoxyCodeLine{00180                 \textcolor{keywordflow}{case} VitNX\_DockArea.Bottom:}
\DoxyCodeLine{00181                     size = \_tabArea.Visible ? Constsants.ToolWindowTabAreaSize : 0;}
\DoxyCodeLine{00182                     Padding = \textcolor{keyword}{new} Padding(1, 0, 0, size);}
\DoxyCodeLine{00183                     \_tabArea.ClientRectangle = \textcolor{keyword}{new} Rectangle(Padding.Left, ClientRectangle.Bottom -\/ size, ClientRectangle.Width -\/ Padding.Horizontal, size);}
\DoxyCodeLine{00184                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00185             \}}
\DoxyCodeLine{00186 }
\DoxyCodeLine{00187             \textcolor{keywordflow}{if} (DockArea == VitNX\_DockArea.Document)}
\DoxyCodeLine{00188             \{}
\DoxyCodeLine{00189                 var dropdownSize = Constsants.DocumentTabAreaSize;}
\DoxyCodeLine{00190                 \_tabArea.DropdownRectangle = \textcolor{keyword}{new} Rectangle(\_tabArea.ClientRectangle.Right -\/ dropdownSize, 0, dropdownSize, dropdownSize);}
\DoxyCodeLine{00191             \}}
\DoxyCodeLine{00192 }
\DoxyCodeLine{00193             BuildTabs();}
\DoxyCodeLine{00194 }
\DoxyCodeLine{00195             EnsureVisible();}
\DoxyCodeLine{00196         \}}
\DoxyCodeLine{00197 }
\DoxyCodeLine{00198         \textcolor{keyword}{private} \textcolor{keywordtype}{void} BuildTabs()}
\DoxyCodeLine{00199         \{}
\DoxyCodeLine{00200             \textcolor{keywordflow}{if} (!\_tabArea.Visible)}
\DoxyCodeLine{00201                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00202 }
\DoxyCodeLine{00203             SuspendLayout();}
\DoxyCodeLine{00204 }
\DoxyCodeLine{00205             var closeButtonSize = DockIcons.close.Width;}
\DoxyCodeLine{00206 }
\DoxyCodeLine{00207             \textcolor{comment}{// Calculate areas of all tabs}}
\DoxyCodeLine{00208             var totalSize = 0;}
\DoxyCodeLine{00209 }
\DoxyCodeLine{00210             var orderedContent = \_contents.OrderBy(c => c.Order);}
\DoxyCodeLine{00211 }
\DoxyCodeLine{00212             \textcolor{keywordflow}{foreach} (var content \textcolor{keywordflow}{in} orderedContent)}
\DoxyCodeLine{00213             \{}
\DoxyCodeLine{00214                 \textcolor{keywordtype}{int} width;}
\DoxyCodeLine{00215 }
\DoxyCodeLine{00216                 var tab = \_tabs[content];}
\DoxyCodeLine{00217 }
\DoxyCodeLine{00218                 \textcolor{keyword}{using} (var g = CreateGraphics())}
\DoxyCodeLine{00219                 \{}
\DoxyCodeLine{00220                     width = tab.CalculateWidth(g, Font);}
\DoxyCodeLine{00221                 \}}
\DoxyCodeLine{00222 }
\DoxyCodeLine{00223                 \textcolor{comment}{// Add additional width for document tab items}}
\DoxyCodeLine{00224                 \textcolor{keywordflow}{if} (DockArea == VitNX\_DockArea.Document)}
\DoxyCodeLine{00225                 \{}
\DoxyCodeLine{00226                     width += 5;}
\DoxyCodeLine{00227                     width += closeButtonSize;}
\DoxyCodeLine{00228 }
\DoxyCodeLine{00229                     \textcolor{keywordflow}{if} (tab.DockContent.Icon != \textcolor{keyword}{null})}
\DoxyCodeLine{00230                         width += tab.DockContent.Icon.Width + 5;}
\DoxyCodeLine{00231                 \}}
\DoxyCodeLine{00232 }
\DoxyCodeLine{00233                 \textcolor{comment}{// Show separator on all tabs for now}}
\DoxyCodeLine{00234                 tab.ShowSeparator = \textcolor{keyword}{true};}
\DoxyCodeLine{00235                 width += 1;}
\DoxyCodeLine{00236 }
\DoxyCodeLine{00237                 var y = DockArea == VitNX\_DockArea.Document ? 0 : ClientRectangle.Height -\/ Constsants.ToolWindowTabAreaSize;}
\DoxyCodeLine{00238                 var height = DockArea == VitNX\_DockArea.Document ? Constsants.DocumentTabAreaSize : Constsants.ToolWindowTabAreaSize;}
\DoxyCodeLine{00239 }
\DoxyCodeLine{00240                 var tabRect = \textcolor{keyword}{new} Rectangle(\_tabArea.ClientRectangle.Left + totalSize, y, width, height);}
\DoxyCodeLine{00241                 tab.ClientRectangle = tabRect;}
\DoxyCodeLine{00242 }
\DoxyCodeLine{00243                 totalSize += width;}
\DoxyCodeLine{00244             \}}
\DoxyCodeLine{00245 }
\DoxyCodeLine{00246             \textcolor{comment}{// Cap the size if too large for the tab area}}
\DoxyCodeLine{00247             \textcolor{keywordflow}{if} (DockArea != VitNX\_DockArea.Document)}
\DoxyCodeLine{00248             \{}
\DoxyCodeLine{00249                 \textcolor{keywordflow}{if} (totalSize > \_tabArea.ClientRectangle.Width)}
\DoxyCodeLine{00250                 \{}
\DoxyCodeLine{00251                     var difference = totalSize -\/ \_tabArea.ClientRectangle.Width;}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253                     \textcolor{comment}{// No matter what, we want to slice off the 1 pixel separator from the final tab.}}
\DoxyCodeLine{00254                     var lastTab = \_tabs[orderedContent.Last()];}
\DoxyCodeLine{00255                     var tabRect = lastTab.ClientRectangle;}
\DoxyCodeLine{00256                     lastTab.ClientRectangle = \textcolor{keyword}{new} Rectangle(tabRect.Left, tabRect.Top, tabRect.Width -\/ 1, tabRect.Height);}
\DoxyCodeLine{00257                     lastTab.ShowSeparator = \textcolor{keyword}{false};}
\DoxyCodeLine{00258 }
\DoxyCodeLine{00259                     var differenceMadeUp = 1;}
\DoxyCodeLine{00260 }
\DoxyCodeLine{00261                     \textcolor{comment}{// Loop through and progressively resize the larger tabs until the total size fits within the tab area.}}
\DoxyCodeLine{00262                     \textcolor{keywordflow}{while} (differenceMadeUp < difference)}
\DoxyCodeLine{00263                     \{}
\DoxyCodeLine{00264                         var largest = \_tabs.Values.OrderByDescending(tab => tab.ClientRectangle.Width)}
\DoxyCodeLine{00265                                                                      .First()}
\DoxyCodeLine{00266                                                                      .ClientRectangle.Width;}
\DoxyCodeLine{00267 }
\DoxyCodeLine{00268                         \textcolor{keywordflow}{foreach} (var content \textcolor{keywordflow}{in} orderedContent)}
\DoxyCodeLine{00269                         \{}
\DoxyCodeLine{00270                             var tab = \_tabs[content];}
\DoxyCodeLine{00271 }
\DoxyCodeLine{00272                             \textcolor{comment}{// Check if previous iteration of loop met the difference}}
\DoxyCodeLine{00273                             \textcolor{keywordflow}{if} (differenceMadeUp >= difference)}
\DoxyCodeLine{00274                                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{00275 }
\DoxyCodeLine{00276                             \textcolor{keywordflow}{if} (tab.ClientRectangle.Width >= largest)}
\DoxyCodeLine{00277                             \{}
\DoxyCodeLine{00278                                 var rect = tab.ClientRectangle;}
\DoxyCodeLine{00279                                 tab.ClientRectangle = \textcolor{keyword}{new} Rectangle(rect.Left, rect.Top, rect.Width -\/ 1, rect.Height);}
\DoxyCodeLine{00280                                 differenceMadeUp += 1;}
\DoxyCodeLine{00281                             \}}
\DoxyCodeLine{00282                         \}}
\DoxyCodeLine{00283                     \}}
\DoxyCodeLine{00284 }
\DoxyCodeLine{00285                     \textcolor{comment}{// After resizing the tabs reposition them accordingly.}}
\DoxyCodeLine{00286                     var xOffset = 0;}
\DoxyCodeLine{00287                     \textcolor{keywordflow}{foreach} (var content \textcolor{keywordflow}{in} orderedContent)}
\DoxyCodeLine{00288                     \{}
\DoxyCodeLine{00289                         var tab = \_tabs[content];}
\DoxyCodeLine{00290 }
\DoxyCodeLine{00291                         var rect = tab.ClientRectangle;}
\DoxyCodeLine{00292                         tab.ClientRectangle = \textcolor{keyword}{new} Rectangle(\_tabArea.ClientRectangle.Left + xOffset, rect.Top, rect.Width, rect.Height);}
\DoxyCodeLine{00293 }
\DoxyCodeLine{00294                         xOffset += rect.Width;}
\DoxyCodeLine{00295                     \}}
\DoxyCodeLine{00296                 \}}
\DoxyCodeLine{00297             \}}
\DoxyCodeLine{00298 }
\DoxyCodeLine{00299             \textcolor{comment}{// Build close button rectangles}}
\DoxyCodeLine{00300             \textcolor{keywordflow}{if} (DockArea == VitNX\_DockArea.Document)}
\DoxyCodeLine{00301             \{}
\DoxyCodeLine{00302                 \textcolor{keywordflow}{foreach} (var content \textcolor{keywordflow}{in} orderedContent)}
\DoxyCodeLine{00303                 \{}
\DoxyCodeLine{00304                     var tab = \_tabs[content];}
\DoxyCodeLine{00305                     var closeRect = \textcolor{keyword}{new} Rectangle(tab.ClientRectangle.Right -\/ 7 -\/ closeButtonSize -\/ 1,}
\DoxyCodeLine{00306                                                   tab.ClientRectangle.Top + (tab.ClientRectangle.Height / 2) -\/ (closeButtonSize / 2) -\/ 1,}
\DoxyCodeLine{00307                                                   closeButtonSize, closeButtonSize);}
\DoxyCodeLine{00308                     tab.CloseButtonRectangle = closeRect;}
\DoxyCodeLine{00309                 \}}
\DoxyCodeLine{00310             \}}
\DoxyCodeLine{00311 }
\DoxyCodeLine{00312             \textcolor{comment}{// Update the tab area with the new total tab width}}
\DoxyCodeLine{00313             totalSize = 0;}
\DoxyCodeLine{00314             \textcolor{keywordflow}{foreach} (var content \textcolor{keywordflow}{in} orderedContent)}
\DoxyCodeLine{00315             \{}
\DoxyCodeLine{00316                 var tab = \_tabs[content];}
\DoxyCodeLine{00317                 totalSize += tab.ClientRectangle.Width;}
\DoxyCodeLine{00318             \}}
\DoxyCodeLine{00319 }
\DoxyCodeLine{00320             \_tabArea.TotalTabSize = totalSize;}
\DoxyCodeLine{00321 }
\DoxyCodeLine{00322             ResumeLayout();}
\DoxyCodeLine{00323 }
\DoxyCodeLine{00324             Invalidate();}
\DoxyCodeLine{00325         \}}
\DoxyCodeLine{00326 }
\DoxyCodeLine{00327         \textcolor{keyword}{public} \textcolor{keywordtype}{void} EnsureVisible()}
\DoxyCodeLine{00328         \{}
\DoxyCodeLine{00329             \textcolor{keywordflow}{if} (DockArea != VitNX\_DockArea.Document)}
\DoxyCodeLine{00330                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00331 }
\DoxyCodeLine{00332             \textcolor{keywordflow}{if} (VisibleContent == \textcolor{keyword}{null})}
\DoxyCodeLine{00333                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00334 }
\DoxyCodeLine{00335             var width = ClientRectangle.Width -\/ Padding.Horizontal -\/ \_tabArea.DropdownRectangle.Width;}
\DoxyCodeLine{00336             var offsetArea = \textcolor{keyword}{new} Rectangle(Padding.Left, 0, width, 0);}
\DoxyCodeLine{00337 }
\DoxyCodeLine{00338             var tab = \_tabs[VisibleContent];}
\DoxyCodeLine{00339 }
\DoxyCodeLine{00340             \textcolor{keywordflow}{if} (tab.ClientRectangle.IsEmpty)}
\DoxyCodeLine{00341                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00342 }
\DoxyCodeLine{00343             \textcolor{keywordflow}{if} (RectangleToTabArea(tab.ClientRectangle).Left < offsetArea.Left)}
\DoxyCodeLine{00344                 \_tabArea.Offset = tab.ClientRectangle.Left;}
\DoxyCodeLine{00345             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (RectangleToTabArea(tab.ClientRectangle).Right > offsetArea.Right)}
\DoxyCodeLine{00346                 \_tabArea.Offset = tab.ClientRectangle.Right -\/ width;}
\DoxyCodeLine{00347 }
\DoxyCodeLine{00348             \textcolor{keywordflow}{if} (\_tabArea.TotalTabSize < offsetArea.Width)}
\DoxyCodeLine{00349                 \_tabArea.Offset = 0;}
\DoxyCodeLine{00350 }
\DoxyCodeLine{00351             \textcolor{keywordflow}{if} (\_tabArea.TotalTabSize > offsetArea.Width)}
\DoxyCodeLine{00352             \{}
\DoxyCodeLine{00353                 var orderedContent = \_contents.OrderBy(x => x.Order);}
\DoxyCodeLine{00354                 var lastTab = \_tabs[orderedContent.Last()];}
\DoxyCodeLine{00355                 \textcolor{keywordflow}{if} (lastTab != \textcolor{keyword}{null})}
\DoxyCodeLine{00356                 \{}
\DoxyCodeLine{00357                     \textcolor{keywordflow}{if} (RectangleToTabArea(lastTab.ClientRectangle).Right < offsetArea.Right)}
\DoxyCodeLine{00358                         \_tabArea.Offset = lastTab.ClientRectangle.Right -\/ width;}
\DoxyCodeLine{00359                 \}}
\DoxyCodeLine{00360             \}}
\DoxyCodeLine{00361 }
\DoxyCodeLine{00362             Invalidate();}
\DoxyCodeLine{00363         \}}
\DoxyCodeLine{00364 }
\DoxyCodeLine{00365         \textcolor{keyword}{public} \textcolor{keywordtype}{void} SetVisibleContent(VitNX\_DockContent content)}
\DoxyCodeLine{00366         \{}
\DoxyCodeLine{00367             \textcolor{keywordflow}{if} (!\_contents.Contains(content))}
\DoxyCodeLine{00368                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00369 }
\DoxyCodeLine{00370             \textcolor{keywordflow}{if} (VisibleContent != content)}
\DoxyCodeLine{00371             \{}
\DoxyCodeLine{00372                 VisibleContent = content;}
\DoxyCodeLine{00373                 content.Visible = \textcolor{keyword}{true};}
\DoxyCodeLine{00374 }
\DoxyCodeLine{00375                 \textcolor{keywordflow}{foreach} (var otherContent \textcolor{keywordflow}{in} \_contents)}
\DoxyCodeLine{00376                 \{}
\DoxyCodeLine{00377                     \textcolor{keywordflow}{if} (otherContent != content)}
\DoxyCodeLine{00378                         otherContent.Visible = \textcolor{keyword}{false};}
\DoxyCodeLine{00379                 \}}
\DoxyCodeLine{00380 }
\DoxyCodeLine{00381                 Invalidate();}
\DoxyCodeLine{00382             \}}
\DoxyCodeLine{00383         \}}
\DoxyCodeLine{00384 }
\DoxyCodeLine{00385         \textcolor{keyword}{private} Point PointToTabArea(Point point)}
\DoxyCodeLine{00386         \{}
\DoxyCodeLine{00387             \textcolor{keywordflow}{return} \textcolor{keyword}{new} Point(point.X -\/ \_tabArea.Offset, point.Y);}
\DoxyCodeLine{00388         \}}
\DoxyCodeLine{00389 }
\DoxyCodeLine{00390         \textcolor{keyword}{private} Rectangle RectangleToTabArea(Rectangle rectangle)}
\DoxyCodeLine{00391         \{}
\DoxyCodeLine{00392             \textcolor{keywordflow}{return} \textcolor{keyword}{new} Rectangle(PointToTabArea(rectangle.Location), rectangle.Size);}
\DoxyCodeLine{00393         \}}
\DoxyCodeLine{00394 }
\DoxyCodeLine{00395 \textcolor{preprocessor}{        \#endregion Method Region}}
\DoxyCodeLine{00396 }
\DoxyCodeLine{00397 \textcolor{preprocessor}{        \#region Event Handler Region}}
\DoxyCodeLine{00398 }
\DoxyCodeLine{00399         \textcolor{keyword}{protected} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnResize(EventArgs eventargs)}
\DoxyCodeLine{00400         \{}
\DoxyCodeLine{00401             base.OnResize(eventargs);}
\DoxyCodeLine{00402 }
\DoxyCodeLine{00403             UpdateTabArea();}
\DoxyCodeLine{00404         \}}
\DoxyCodeLine{00405 }
\DoxyCodeLine{00406         \textcolor{keyword}{protected} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnMouseMove(MouseEventArgs e)}
\DoxyCodeLine{00407         \{}
\DoxyCodeLine{00408             base.OnMouseMove(e);}
\DoxyCodeLine{00409 }
\DoxyCodeLine{00410             \textcolor{keywordflow}{if} (\_dragTab != \textcolor{keyword}{null})}
\DoxyCodeLine{00411             \{}
\DoxyCodeLine{00412                 var offsetX = e.Location.X + \_tabArea.Offset;}
\DoxyCodeLine{00413                 \textcolor{keywordflow}{if} (offsetX < \_dragTab.ClientRectangle.Left)}
\DoxyCodeLine{00414                 \{}
\DoxyCodeLine{00415                     \textcolor{keywordflow}{if} (\_dragTab.DockContent.Order > 0)}
\DoxyCodeLine{00416                     \{}
\DoxyCodeLine{00417                         var otherTabs = \_tabs.Values.Where(t => t.DockContent.Order == \_dragTab.DockContent.Order -\/ 1).ToList();}
\DoxyCodeLine{00418                         \textcolor{keywordflow}{if} (otherTabs.Count == 0)}
\DoxyCodeLine{00419                             \textcolor{keywordflow}{return};}
\DoxyCodeLine{00420 }
\DoxyCodeLine{00421                         var otherTab = otherTabs.First();}
\DoxyCodeLine{00422 }
\DoxyCodeLine{00423                         \textcolor{keywordflow}{if} (otherTab == \textcolor{keyword}{null})}
\DoxyCodeLine{00424                             \textcolor{keywordflow}{return};}
\DoxyCodeLine{00425 }
\DoxyCodeLine{00426                         var oldIndex = \_dragTab.DockContent.Order;}
\DoxyCodeLine{00427                         \_dragTab.DockContent.Order = oldIndex -\/ 1;}
\DoxyCodeLine{00428                         otherTab.DockContent.Order = oldIndex;}
\DoxyCodeLine{00429 }
\DoxyCodeLine{00430                         BuildTabs();}
\DoxyCodeLine{00431                         EnsureVisible();}
\DoxyCodeLine{00432 }
\DoxyCodeLine{00433                         \_tabArea.RebuildMenu();}
\DoxyCodeLine{00434 }
\DoxyCodeLine{00435                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00436                     \}}
\DoxyCodeLine{00437                 \}}
\DoxyCodeLine{00438                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (offsetX > \_dragTab.ClientRectangle.Right)}
\DoxyCodeLine{00439                 \{}
\DoxyCodeLine{00440                     var maxOrder = \_contents.Count;}
\DoxyCodeLine{00441 }
\DoxyCodeLine{00442                     \textcolor{keywordflow}{if} (\_dragTab.DockContent.Order < maxOrder)}
\DoxyCodeLine{00443                     \{}
\DoxyCodeLine{00444                         var otherTabs = \_tabs.Values.Where(t => t.DockContent.Order == \_dragTab.DockContent.Order + 1).ToList();}
\DoxyCodeLine{00445                         \textcolor{keywordflow}{if} (otherTabs.Count == 0)}
\DoxyCodeLine{00446                             \textcolor{keywordflow}{return};}
\DoxyCodeLine{00447 }
\DoxyCodeLine{00448                         var otherTab = otherTabs.First();}
\DoxyCodeLine{00449 }
\DoxyCodeLine{00450                         \textcolor{keywordflow}{if} (otherTab == \textcolor{keyword}{null})}
\DoxyCodeLine{00451                             \textcolor{keywordflow}{return};}
\DoxyCodeLine{00452 }
\DoxyCodeLine{00453                         var oldIndex = \_dragTab.DockContent.Order;}
\DoxyCodeLine{00454                         \_dragTab.DockContent.Order = oldIndex + 1;}
\DoxyCodeLine{00455                         otherTab.DockContent.Order = oldIndex;}
\DoxyCodeLine{00456 }
\DoxyCodeLine{00457                         BuildTabs();}
\DoxyCodeLine{00458                         EnsureVisible();}
\DoxyCodeLine{00459 }
\DoxyCodeLine{00460                         \_tabArea.RebuildMenu();}
\DoxyCodeLine{00461 }
\DoxyCodeLine{00462                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00463                     \}}
\DoxyCodeLine{00464                 \}}
\DoxyCodeLine{00465 }
\DoxyCodeLine{00466                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00467             \}}
\DoxyCodeLine{00468 }
\DoxyCodeLine{00469             \textcolor{keywordflow}{if} (\_tabArea.DropdownRectangle.Contains(e.Location))}
\DoxyCodeLine{00470             \{}
\DoxyCodeLine{00471                 \_tabArea.DropdownHot = \textcolor{keyword}{true};}
\DoxyCodeLine{00472 }
\DoxyCodeLine{00473                 \textcolor{keywordflow}{foreach} (var tab \textcolor{keywordflow}{in} \_tabs.Values)}
\DoxyCodeLine{00474                     tab.Hot = \textcolor{keyword}{false};}
\DoxyCodeLine{00475 }
\DoxyCodeLine{00476                 Invalidate();}
\DoxyCodeLine{00477                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00478             \}}
\DoxyCodeLine{00479 }
\DoxyCodeLine{00480             \_tabArea.DropdownHot = \textcolor{keyword}{false};}
\DoxyCodeLine{00481 }
\DoxyCodeLine{00482             \textcolor{keywordflow}{foreach} (var tab \textcolor{keywordflow}{in} \_tabs.Values)}
\DoxyCodeLine{00483             \{}
\DoxyCodeLine{00484                 var rect = RectangleToTabArea(tab.ClientRectangle);}
\DoxyCodeLine{00485                 var hot = rect.Contains(e.Location);}
\DoxyCodeLine{00486 }
\DoxyCodeLine{00487                 \textcolor{keywordflow}{if} (tab.Hot != hot)}
\DoxyCodeLine{00488                 \{}
\DoxyCodeLine{00489                     tab.Hot = hot;}
\DoxyCodeLine{00490                     Invalidate();}
\DoxyCodeLine{00491                 \}}
\DoxyCodeLine{00492 }
\DoxyCodeLine{00493                 var closeRect = RectangleToTabArea(tab.CloseButtonRectangle);}
\DoxyCodeLine{00494                 var closeHot = closeRect.Contains(e.Location);}
\DoxyCodeLine{00495 }
\DoxyCodeLine{00496                 \textcolor{keywordflow}{if} (tab.CloseButtonHot != closeHot)}
\DoxyCodeLine{00497                 \{}
\DoxyCodeLine{00498                     tab.CloseButtonHot = closeHot;}
\DoxyCodeLine{00499                     Invalidate();}
\DoxyCodeLine{00500                 \}}
\DoxyCodeLine{00501             \}}
\DoxyCodeLine{00502         \}}
\DoxyCodeLine{00503 }
\DoxyCodeLine{00504         \textcolor{keyword}{protected} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnMouseDown(MouseEventArgs e)}
\DoxyCodeLine{00505         \{}
\DoxyCodeLine{00506             base.OnMouseDown(e);}
\DoxyCodeLine{00507 }
\DoxyCodeLine{00508             \textcolor{keywordflow}{if} (\_tabArea.DropdownRectangle.Contains(e.Location))}
\DoxyCodeLine{00509             \{}
\DoxyCodeLine{00510                 \_tabArea.DropdownHot = \textcolor{keyword}{true};}
\DoxyCodeLine{00511                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00512             \}}
\DoxyCodeLine{00513 }
\DoxyCodeLine{00514             \textcolor{keywordflow}{foreach} (var tab \textcolor{keywordflow}{in} \_tabs.Values)}
\DoxyCodeLine{00515             \{}
\DoxyCodeLine{00516                 var rect = RectangleToTabArea(tab.ClientRectangle);}
\DoxyCodeLine{00517                 \textcolor{keywordflow}{if} (rect.Contains(e.Location))}
\DoxyCodeLine{00518                 \{}
\DoxyCodeLine{00519                     \textcolor{keywordflow}{if} (e.Button == MouseButtons.Middle)}
\DoxyCodeLine{00520                     \{}
\DoxyCodeLine{00521                         tab.DockContent.Close();}
\DoxyCodeLine{00522                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00523                     \}}
\DoxyCodeLine{00524 }
\DoxyCodeLine{00525                     var closeRect = RectangleToTabArea(tab.CloseButtonRectangle);}
\DoxyCodeLine{00526                     \textcolor{keywordflow}{if} (closeRect.Contains(e.Location))}
\DoxyCodeLine{00527                     \{}
\DoxyCodeLine{00528                         \_tabArea.ClickedCloseButton = tab;}
\DoxyCodeLine{00529                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00530                     \}}
\DoxyCodeLine{00531                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00532                     \{}
\DoxyCodeLine{00533                         DockPanel.ActiveContent = tab.DockContent;}
\DoxyCodeLine{00534                         EnsureVisible();}
\DoxyCodeLine{00535 }
\DoxyCodeLine{00536                         \_dragTab = tab;}
\DoxyCodeLine{00537 }
\DoxyCodeLine{00538                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00539                     \}}
\DoxyCodeLine{00540                 \}}
\DoxyCodeLine{00541             \}}
\DoxyCodeLine{00542 }
\DoxyCodeLine{00543             \textcolor{keywordflow}{if} (VisibleContent != \textcolor{keyword}{null})}
\DoxyCodeLine{00544                 DockPanel.ActiveContent = VisibleContent;}
\DoxyCodeLine{00545         \}}
\DoxyCodeLine{00546 }
\DoxyCodeLine{00547         \textcolor{keyword}{protected} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnMouseUp(MouseEventArgs e)}
\DoxyCodeLine{00548         \{}
\DoxyCodeLine{00549             base.OnMouseUp(e);}
\DoxyCodeLine{00550 }
\DoxyCodeLine{00551             \_dragTab = \textcolor{keyword}{null};}
\DoxyCodeLine{00552 }
\DoxyCodeLine{00553             \textcolor{keywordflow}{if} (\_tabArea.DropdownRectangle.Contains(e.Location))}
\DoxyCodeLine{00554             \{}
\DoxyCodeLine{00555                 \textcolor{keywordflow}{if} (\_tabArea.DropdownHot)}
\DoxyCodeLine{00556                     \_tabArea.ShowMenu(\textcolor{keyword}{this}, \textcolor{keyword}{new} Point(\_tabArea.DropdownRectangle.Left, \_tabArea.DropdownRectangle.Bottom -\/ 2));}
\DoxyCodeLine{00557 }
\DoxyCodeLine{00558                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00559             \}}
\DoxyCodeLine{00560 }
\DoxyCodeLine{00561             \textcolor{keywordflow}{if} (\_tabArea.ClickedCloseButton == \textcolor{keyword}{null})}
\DoxyCodeLine{00562                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00563 }
\DoxyCodeLine{00564             var closeRect = RectangleToTabArea(\_tabArea.ClickedCloseButton.CloseButtonRectangle);}
\DoxyCodeLine{00565             \textcolor{keywordflow}{if} (closeRect.Contains(e.Location))}
\DoxyCodeLine{00566                 \_tabArea.ClickedCloseButton.DockContent.Close();}
\DoxyCodeLine{00567         \}}
\DoxyCodeLine{00568 }
\DoxyCodeLine{00569         \textcolor{keyword}{protected} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnMouseLeave(EventArgs e)}
\DoxyCodeLine{00570         \{}
\DoxyCodeLine{00571             base.OnMouseLeave(e);}
\DoxyCodeLine{00572 }
\DoxyCodeLine{00573             \textcolor{keywordflow}{foreach} (var tab \textcolor{keywordflow}{in} \_tabs.Values)}
\DoxyCodeLine{00574                 tab.Hot = \textcolor{keyword}{false};}
\DoxyCodeLine{00575 }
\DoxyCodeLine{00576             Invalidate();}
\DoxyCodeLine{00577         \}}
\DoxyCodeLine{00578 }
\DoxyCodeLine{00579         \textcolor{keyword}{private} \textcolor{keywordtype}{void} TabMenuItem\_Select(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{00580         \{}
\DoxyCodeLine{00581             var menuItem = sender as ToolStripMenuItem;}
\DoxyCodeLine{00582             \textcolor{keywordflow}{if} (menuItem == \textcolor{keyword}{null})}
\DoxyCodeLine{00583                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00584 }
\DoxyCodeLine{00585             var content = menuItem.Tag as VitNX\_DockContent;}
\DoxyCodeLine{00586             \textcolor{keywordflow}{if} (content == \textcolor{keyword}{null})}
\DoxyCodeLine{00587                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00588 }
\DoxyCodeLine{00589             DockPanel.ActiveContent = content;}
\DoxyCodeLine{00590         \}}
\DoxyCodeLine{00591 }
\DoxyCodeLine{00592         \textcolor{keyword}{private} \textcolor{keywordtype}{void} DockPanel\_ActiveContentChanged(\textcolor{keywordtype}{object} sender, DockContentEventArgs e)}
\DoxyCodeLine{00593         \{}
\DoxyCodeLine{00594             \textcolor{keywordflow}{if} (!\_contents.Contains(e.Content))}
\DoxyCodeLine{00595                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00596 }
\DoxyCodeLine{00597             \textcolor{keywordflow}{if} (e.Content == VisibleContent)}
\DoxyCodeLine{00598             \{}
\DoxyCodeLine{00599                 VisibleContent.Focus();}
\DoxyCodeLine{00600                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00601             \}}
\DoxyCodeLine{00602 }
\DoxyCodeLine{00603             VisibleContent = e.Content;}
\DoxyCodeLine{00604 }
\DoxyCodeLine{00605             \textcolor{keywordflow}{foreach} (var content \textcolor{keywordflow}{in} \_contents)}
\DoxyCodeLine{00606                 content.Visible = content == VisibleContent;}
\DoxyCodeLine{00607 }
\DoxyCodeLine{00608             VisibleContent.Focus();}
\DoxyCodeLine{00609 }
\DoxyCodeLine{00610             EnsureVisible();}
\DoxyCodeLine{00611             Invalidate();}
\DoxyCodeLine{00612         \}}
\DoxyCodeLine{00613 }
\DoxyCodeLine{00614         \textcolor{keyword}{private} \textcolor{keywordtype}{void} DockContent\_DockTextChanged(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{00615         \{}
\DoxyCodeLine{00616             BuildTabs();}
\DoxyCodeLine{00617         \}}
\DoxyCodeLine{00618 }
\DoxyCodeLine{00619 \textcolor{preprocessor}{        \#endregion Event Handler Region}}
\DoxyCodeLine{00620 }
\DoxyCodeLine{00621 \textcolor{preprocessor}{        \#region Render Region}}
\DoxyCodeLine{00622 }
\DoxyCodeLine{00623         \textcolor{keyword}{public} \textcolor{keywordtype}{void} Redraw()}
\DoxyCodeLine{00624         \{}
\DoxyCodeLine{00625             Invalidate();}
\DoxyCodeLine{00626 }
\DoxyCodeLine{00627             \textcolor{keywordflow}{foreach} (var content \textcolor{keywordflow}{in} \_contents)}
\DoxyCodeLine{00628                 content.Invalidate();}
\DoxyCodeLine{00629         \}}
\DoxyCodeLine{00630 }
\DoxyCodeLine{00631         \textcolor{keyword}{protected} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnPaint(PaintEventArgs e)}
\DoxyCodeLine{00632         \{}
\DoxyCodeLine{00633             var g = e.Graphics;}
\DoxyCodeLine{00634 }
\DoxyCodeLine{00635             \textcolor{keyword}{using} (var b = \textcolor{keyword}{new} SolidBrush(Colors.GreyBackground))}
\DoxyCodeLine{00636             \{}
\DoxyCodeLine{00637                 g.FillRectangle(b, ClientRectangle);}
\DoxyCodeLine{00638             \}}
\DoxyCodeLine{00639 }
\DoxyCodeLine{00640             \textcolor{keywordflow}{if} (!\_tabArea.Visible)}
\DoxyCodeLine{00641                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00642 }
\DoxyCodeLine{00643             \textcolor{keyword}{using} (var b = \textcolor{keyword}{new} SolidBrush(Colors.MediumBackground))}
\DoxyCodeLine{00644             \{}
\DoxyCodeLine{00645                 g.FillRectangle(b, \_tabArea.ClientRectangle);}
\DoxyCodeLine{00646             \}}
\DoxyCodeLine{00647 }
\DoxyCodeLine{00648             \textcolor{keywordflow}{foreach} (var tab \textcolor{keywordflow}{in} \_tabs.Values)}
\DoxyCodeLine{00649             \{}
\DoxyCodeLine{00650                 \textcolor{keywordflow}{if} (DockArea == VitNX\_DockArea.Document)}
\DoxyCodeLine{00651                     PaintDocumentTab(g, tab);}
\DoxyCodeLine{00652                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{00653                     PaintToolWindowTab(g, tab);}
\DoxyCodeLine{00654             \}}
\DoxyCodeLine{00655 }
\DoxyCodeLine{00656             \textcolor{keywordflow}{if} (DockArea == VitNX\_DockArea.Document)}
\DoxyCodeLine{00657             \{}
\DoxyCodeLine{00658                 \textcolor{comment}{// Color divider}}
\DoxyCodeLine{00659                 var isActiveGroup = DockPanel.ActiveGroup == \textcolor{keyword}{this};}
\DoxyCodeLine{00660                 var divColor = isActiveGroup ? Colors.BlueSelection : Colors.GreySelection;}
\DoxyCodeLine{00661                 \textcolor{keyword}{using} (var b = \textcolor{keyword}{new} SolidBrush(divColor))}
\DoxyCodeLine{00662                 \{}
\DoxyCodeLine{00663                     var divRect = \textcolor{keyword}{new} Rectangle(\_tabArea.ClientRectangle.Left, \_tabArea.ClientRectangle.Bottom -\/ 2, \_tabArea.ClientRectangle.Width, 2);}
\DoxyCodeLine{00664                     g.FillRectangle(b, divRect);}
\DoxyCodeLine{00665                 \}}
\DoxyCodeLine{00666 }
\DoxyCodeLine{00667                 \textcolor{comment}{// Content dropdown list}}
\DoxyCodeLine{00668                 var dropdownRect = \textcolor{keyword}{new} Rectangle(\_tabArea.DropdownRectangle.Left, \_tabArea.DropdownRectangle.Top, \_tabArea.DropdownRectangle.Width, \_tabArea.DropdownRectangle.Height -\/ 2);}
\DoxyCodeLine{00669 }
\DoxyCodeLine{00670                 \textcolor{keyword}{using} (var b = \textcolor{keyword}{new} SolidBrush(Colors.MediumBackground))}
\DoxyCodeLine{00671                 \{}
\DoxyCodeLine{00672                     g.FillRectangle(b, dropdownRect);}
\DoxyCodeLine{00673                 \}}
\DoxyCodeLine{00674 }
\DoxyCodeLine{00675                 \textcolor{keyword}{using} (var img = DockIcons.arrow)}
\DoxyCodeLine{00676                 \{}
\DoxyCodeLine{00677                     g.DrawImageUnscaled(img, dropdownRect.Left + (dropdownRect.Width / 2) -\/ (img.Width / 2), dropdownRect.Top + (dropdownRect.Height / 2) -\/ (img.Height / 2) + 1);}
\DoxyCodeLine{00678                 \}}
\DoxyCodeLine{00679             \}}
\DoxyCodeLine{00680         \}}
\DoxyCodeLine{00681 }
\DoxyCodeLine{00682         \textcolor{keyword}{private} \textcolor{keywordtype}{void} PaintDocumentTab(Graphics g, VitNX\_DockTab tab)}
\DoxyCodeLine{00683         \{}
\DoxyCodeLine{00684             var tabRect = RectangleToTabArea(tab.ClientRectangle);}
\DoxyCodeLine{00685 }
\DoxyCodeLine{00686             var isVisibleTab = VisibleContent == tab.DockContent;}
\DoxyCodeLine{00687             var isActiveGroup = DockPanel.ActiveGroup == \textcolor{keyword}{this};}
\DoxyCodeLine{00688 }
\DoxyCodeLine{00689             var bgColor = isVisibleTab ? Colors.BlueSelection : Colors.VitNXBackground;}
\DoxyCodeLine{00690 }
\DoxyCodeLine{00691             \textcolor{keywordflow}{if} (!isActiveGroup)}
\DoxyCodeLine{00692                 bgColor = isVisibleTab ? Colors.GreySelection : Colors.VitNXBackground;}
\DoxyCodeLine{00693 }
\DoxyCodeLine{00694             \textcolor{keywordflow}{if} (tab.Hot \&\& !isVisibleTab)}
\DoxyCodeLine{00695                 bgColor = Colors.MediumBackground;}
\DoxyCodeLine{00696 }
\DoxyCodeLine{00697             \textcolor{keyword}{using} (var b = \textcolor{keyword}{new} SolidBrush(bgColor))}
\DoxyCodeLine{00698             \{}
\DoxyCodeLine{00699                 g.FillRectangle(b, tabRect);}
\DoxyCodeLine{00700             \}}
\DoxyCodeLine{00701 }
\DoxyCodeLine{00702             \textcolor{comment}{// Draw separators}}
\DoxyCodeLine{00703             \textcolor{keywordflow}{if} (tab.ShowSeparator)}
\DoxyCodeLine{00704             \{}
\DoxyCodeLine{00705                 \textcolor{keyword}{using} (var p = \textcolor{keyword}{new} Pen(Colors.VitNXBorder))}
\DoxyCodeLine{00706                 \{}
\DoxyCodeLine{00707                     g.DrawLine(p, tabRect.Right -\/ 1, tabRect.Top, tabRect.Right -\/ 1, tabRect.Bottom);}
\DoxyCodeLine{00708                 \}}
\DoxyCodeLine{00709             \}}
\DoxyCodeLine{00710 }
\DoxyCodeLine{00711             var xOffset = 0;}
\DoxyCodeLine{00712 }
\DoxyCodeLine{00713             \textcolor{comment}{// Draw icon}}
\DoxyCodeLine{00714             \textcolor{keywordflow}{if} (tab.DockContent.Icon != \textcolor{keyword}{null})}
\DoxyCodeLine{00715             \{}
\DoxyCodeLine{00716                 g.DrawImageUnscaled(tab.DockContent.Icon, tabRect.Left + 5, tabRect.Top + 4);}
\DoxyCodeLine{00717                 xOffset += tab.DockContent.Icon.Width + 2;}
\DoxyCodeLine{00718             \}}
\DoxyCodeLine{00719 }
\DoxyCodeLine{00720             var tabTextFormat = \textcolor{keyword}{new} StringFormat}
\DoxyCodeLine{00721             \{}
\DoxyCodeLine{00722                 Alignment = StringAlignment.Near,}
\DoxyCodeLine{00723                 LineAlignment = StringAlignment.Center,}
\DoxyCodeLine{00724                 FormatFlags = StringFormatFlags.NoWrap,}
\DoxyCodeLine{00725                 Trimming = StringTrimming.EllipsisCharacter}
\DoxyCodeLine{00726             \};}
\DoxyCodeLine{00727 }
\DoxyCodeLine{00728             \textcolor{comment}{// Draw text}}
\DoxyCodeLine{00729             var textColor = isVisibleTab ? Colors.LightText : Colors.DisabledText;}
\DoxyCodeLine{00730             \textcolor{keyword}{using} (var b = \textcolor{keyword}{new} SolidBrush(textColor))}
\DoxyCodeLine{00731             \{}
\DoxyCodeLine{00732                 var textRect = \textcolor{keyword}{new} Rectangle(tabRect.Left + 5 + xOffset, tabRect.Top, tabRect.Width -\/ tab.CloseButtonRectangle.Width -\/ 7 -\/ 5 -\/ xOffset, tabRect.Height);}
\DoxyCodeLine{00733                 g.DrawString(tab.DockContent.DockText, Font, b, textRect, tabTextFormat);}
\DoxyCodeLine{00734             \}}
\DoxyCodeLine{00735 }
\DoxyCodeLine{00736             \textcolor{comment}{// Close button}}
\DoxyCodeLine{00737             var img = tab.CloseButtonHot ? DockIcons.inactive\_close\_selected : DockIcons.inactive\_close;}
\DoxyCodeLine{00738 }
\DoxyCodeLine{00739             \textcolor{keywordflow}{if} (isVisibleTab)}
\DoxyCodeLine{00740             \{}
\DoxyCodeLine{00741                 \textcolor{keywordflow}{if} (isActiveGroup)}
\DoxyCodeLine{00742                     img = tab.CloseButtonHot ? DockIcons.close\_selected : DockIcons.close;}
\DoxyCodeLine{00743                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{00744                     img = tab.CloseButtonHot ? DockIcons.close\_selected : DockIcons.active\_inactive\_close;}
\DoxyCodeLine{00745             \}}
\DoxyCodeLine{00746 }
\DoxyCodeLine{00747             var closeRect = RectangleToTabArea(tab.CloseButtonRectangle);}
\DoxyCodeLine{00748             g.DrawImageUnscaled(img, closeRect.Left, closeRect.Top);}
\DoxyCodeLine{00749         \}}
\DoxyCodeLine{00750 }
\DoxyCodeLine{00751         \textcolor{keyword}{private} \textcolor{keywordtype}{void} PaintToolWindowTab(Graphics g, VitNX\_DockTab tab)}
\DoxyCodeLine{00752         \{}
\DoxyCodeLine{00753             var tabRect = tab.ClientRectangle;}
\DoxyCodeLine{00754 }
\DoxyCodeLine{00755             var isVisibleTab = VisibleContent == tab.DockContent;}
\DoxyCodeLine{00756 }
\DoxyCodeLine{00757             var bgColor = isVisibleTab ? Colors.GreyBackground : Colors.VitNXBackground;}
\DoxyCodeLine{00758 }
\DoxyCodeLine{00759             \textcolor{keywordflow}{if} (tab.Hot \&\& !isVisibleTab)}
\DoxyCodeLine{00760                 bgColor = Colors.MediumBackground;}
\DoxyCodeLine{00761 }
\DoxyCodeLine{00762             \textcolor{keyword}{using} (var b = \textcolor{keyword}{new} SolidBrush(bgColor))}
\DoxyCodeLine{00763             \{}
\DoxyCodeLine{00764                 g.FillRectangle(b, tabRect);}
\DoxyCodeLine{00765             \}}
\DoxyCodeLine{00766 }
\DoxyCodeLine{00767             \textcolor{comment}{// Draw separators}}
\DoxyCodeLine{00768             \textcolor{keywordflow}{if} (tab.ShowSeparator)}
\DoxyCodeLine{00769             \{}
\DoxyCodeLine{00770                 \textcolor{keyword}{using} (var p = \textcolor{keyword}{new} Pen(Colors.VitNXBorder))}
\DoxyCodeLine{00771                 \{}
\DoxyCodeLine{00772                     g.DrawLine(p, tabRect.Right -\/ 1, tabRect.Top, tabRect.Right -\/ 1, tabRect.Bottom);}
\DoxyCodeLine{00773                 \}}
\DoxyCodeLine{00774             \}}
\DoxyCodeLine{00775 }
\DoxyCodeLine{00776             var tabTextFormat = \textcolor{keyword}{new} StringFormat}
\DoxyCodeLine{00777             \{}
\DoxyCodeLine{00778                 Alignment = StringAlignment.Near,}
\DoxyCodeLine{00779                 LineAlignment = StringAlignment.Center,}
\DoxyCodeLine{00780                 FormatFlags = StringFormatFlags.NoWrap,}
\DoxyCodeLine{00781                 Trimming = StringTrimming.EllipsisCharacter}
\DoxyCodeLine{00782             \};}
\DoxyCodeLine{00783 }
\DoxyCodeLine{00784             var textColor = isVisibleTab ? Colors.BlueHighlight : Colors.DisabledText;}
\DoxyCodeLine{00785             \textcolor{keyword}{using} (var b = \textcolor{keyword}{new} SolidBrush(textColor))}
\DoxyCodeLine{00786             \{}
\DoxyCodeLine{00787                 var textRect = \textcolor{keyword}{new} Rectangle(tabRect.Left + 5, tabRect.Top, tabRect.Width -\/ 5, tabRect.Height);}
\DoxyCodeLine{00788                 g.DrawString(tab.DockContent.DockText, Font, b, textRect, tabTextFormat);}
\DoxyCodeLine{00789             \}}
\DoxyCodeLine{00790         \}}
\DoxyCodeLine{00791 }
\DoxyCodeLine{00792         \textcolor{keyword}{protected} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnPaintBackground(PaintEventArgs e)}
\DoxyCodeLine{00793         \{}
\DoxyCodeLine{00794             \textcolor{comment}{// Absorb event}}
\DoxyCodeLine{00795         \}}
\DoxyCodeLine{00796 }
\DoxyCodeLine{00797 \textcolor{preprocessor}{        \#endregion Render Region}}
\DoxyCodeLine{00798     \}}
\DoxyCodeLine{00799 \}}

\end{DoxyCode}
