\doxysection{Web.\+cs}
\label{a00014_source}\index{E:/Github/VitNX/VitNX/Functions/Common/Web.cs@{E:/Github/VitNX/VitNX/Functions/Common/Web.cs}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{keyword}{using} System;}
\DoxyCodeLine{00002 \textcolor{keyword}{using} System.Linq;}
\DoxyCodeLine{00003 \textcolor{keyword}{using} System.Net;}
\DoxyCodeLine{00004 \textcolor{keyword}{using} System.Net.NetworkInformation;}
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 \textcolor{keyword}{namespace }VitNX.Functions.Common.Web}
\DoxyCodeLine{00007 \{}
\DoxyCodeLine{00008     \textcolor{keyword}{public} \textcolor{keyword}{class }DataFromSites}
\DoxyCodeLine{00009     \{}
\DoxyCodeLine{00010         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{string} GetGeo(\textcolor{keywordtype}{string} ip)}
\DoxyCodeLine{00011         \{}
\DoxyCodeLine{00012             \textcolor{keywordflow}{try}}
\DoxyCodeLine{00013             \{}
\DoxyCodeLine{00014                 \textcolor{keyword}{using} (WebClient client = \textcolor{keyword}{new} WebClient())}
\DoxyCodeLine{00015                     \textcolor{keywordflow}{return} client.DownloadString(\$\textcolor{stringliteral}{"{}https://ipinfo.io/\{ip\}/json"{}});}
\DoxyCodeLine{00016             \}}
\DoxyCodeLine{00017             \textcolor{keywordflow}{catch} \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}404"{}}; \}}
\DoxyCodeLine{00018         \}}
\DoxyCodeLine{00019 }
\DoxyCodeLine{00020         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} IsValidTelegramBotToken(\textcolor{keywordtype}{string} botToken)}
\DoxyCodeLine{00021         \{}
\DoxyCodeLine{00022             \textcolor{keywordflow}{try}}
\DoxyCodeLine{00023             \{}
\DoxyCodeLine{00024                 \textcolor{keyword}{using} (WebClient client = \textcolor{keyword}{new} WebClient())}
\DoxyCodeLine{00025                     \textcolor{keywordflow}{return} !client.DownloadString(\textcolor{keyword}{new} Uri(\$\textcolor{stringliteral}{"{}https://api.telegram.org/bot\{botToken\}/getMe"{}})).Contains(\textcolor{stringliteral}{"{}error\_code"{}});}
\DoxyCodeLine{00026             \}}
\DoxyCodeLine{00027             \textcolor{keywordflow}{catch} \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}
\DoxyCodeLine{00028         \}}
\DoxyCodeLine{00029 }
\DoxyCodeLine{00030         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{int} IHaveInternet()}
\DoxyCodeLine{00031         \{}
\DoxyCodeLine{00032             \textcolor{keywordflow}{try}}
\DoxyCodeLine{00033             \{}
\DoxyCodeLine{00034                 Ping ping = \textcolor{keyword}{new} Ping();}
\DoxyCodeLine{00035                 PingReply pingReply = \textcolor{keyword}{null};}
\DoxyCodeLine{00036                 pingReply = ping.Send(\textcolor{stringliteral}{"{}google.com"{}});}
\DoxyCodeLine{00037                 \textcolor{keywordflow}{if} (pingReply.Status == IPStatus.Success)}
\DoxyCodeLine{00038                     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{00039                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{00040                     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00041             \}}
\DoxyCodeLine{00042             \textcolor{keywordflow}{catch} \{ \textcolor{keywordflow}{return} 0; \}}
\DoxyCodeLine{00043         \}}
\DoxyCodeLine{00044     \}}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046     \textcolor{keyword}{public} \textcolor{keyword}{class }Config}
\DoxyCodeLine{00047     \{}
\DoxyCodeLine{00048         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{string} Host = Dns.GetHostName();}
\DoxyCodeLine{00049         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{string} LocalIpForNet4 = Dns.GetHostByName(Dns.GetHostName()).AddressList[0].ToString();}
\DoxyCodeLine{00050         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{string} \_PublicIp = \textcolor{stringliteral}{"{}0.0.0.0"{}};}
\DoxyCodeLine{00051 }
\DoxyCodeLine{00052         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{void} Set()}
\DoxyCodeLine{00053         \{}
\DoxyCodeLine{00054             \textcolor{keyword}{using} (WebClient client = \textcolor{keyword}{new} WebClient())}
\DoxyCodeLine{00055             \{}
\DoxyCodeLine{00056                 \textcolor{keywordflow}{try} \{ \_PublicIp = client.DownloadString(\textcolor{stringliteral}{"{}https://icanhazip.com"{}}); \} \textcolor{keywordflow}{catch} \{ \_PublicIp = client.DownloadString(\textcolor{stringliteral}{"{}https://checkip.amazonaws.com"{}}); \}}
\DoxyCodeLine{00057                 \textcolor{keywordflow}{if} (\_PublicIp == \textcolor{stringliteral}{"{}"{}} || \_PublicIp == \textcolor{stringliteral}{"{}0.0.0.0"{}})}
\DoxyCodeLine{00058                 \{}
\DoxyCodeLine{00059                     \textcolor{keywordflow}{try} \{ \_PublicIp = client.DownloadString(\textcolor{stringliteral}{"{}https://checkip.amazonaws.com"{}}); \} \textcolor{keywordflow}{catch} \{ \}}
\DoxyCodeLine{00060                 \}}
\DoxyCodeLine{00061             \}}
\DoxyCodeLine{00062             \_PublicIp = \_PublicIp.ToString().Replace(\textcolor{stringliteral}{"{}\(\backslash\)n"{}}, \textcolor{stringliteral}{"{}"{}}).Replace(\textcolor{stringliteral}{"{}\(\backslash\)r"{}}, \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00063         \}}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065         \textcolor{keyword}{public} \textcolor{keyword}{static} IPAddress DefaultGateway = NetworkInterface}
\DoxyCodeLine{00066         .GetAllNetworkInterfaces()}
\DoxyCodeLine{00067         .Where(n => n.OperationalStatus == OperationalStatus.Up)}
\DoxyCodeLine{00068         .Where(n => n.NetworkInterfaceType != NetworkInterfaceType.Loopback)}
\DoxyCodeLine{00069         .SelectMany(n => n.GetIPProperties()?.GatewayAddresses)}
\DoxyCodeLine{00070         .Select(g => g?.Address)}
\DoxyCodeLine{00071         .Where(a => a != \textcolor{keyword}{null})}
\DoxyCodeLine{00072         .FirstOrDefault();}
\DoxyCodeLine{00073 }
\DoxyCodeLine{00074         \textcolor{keyword}{public} \textcolor{keyword}{static} SecurityProtocolType UseProtocols = SecurityProtocolType.Tls13 |}
\DoxyCodeLine{00075         SecurityProtocolType.Tls12 |}
\DoxyCodeLine{00076         SecurityProtocolType.Tls11 |}
\DoxyCodeLine{00077         SecurityProtocolType.Tls;}
\DoxyCodeLine{00078     \}}
\DoxyCodeLine{00079 \}}

\end{DoxyCode}
